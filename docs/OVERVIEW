 A quick overview of how Devmon works:
---------------------------------------------------------------------

  Once devmon starts, it will run in the background as a daemon 
  (unless instructed not to), and will run in an endless loop.
  The loop looks something like this:

  1. Devmon reads in the list of hosts to be monitored from its
     database.

     In a single-node installation, the Devmon database is stored 
     in the 'hosts.db' file.  In a multi-node installation, it
     is kept in a MySQL database.

     This database must be populated at least once (by running
     devmon with the --readbbhosts flag) before devmon will be
     able to monitor anything.

  2. Devmon reads in its templates.  A single-node installation
     reads the templates from disk at the beginning of every
     polling cycle.  The multi-node version reads the templates
     from the database, but only if they have been updated/changed
     since the last time it read them.

  3. Devmon does SNMP queries on all of the devices in its database.
     SNMP queries are optimized so that if the same SNMP OID is
     specified in multiple tests for a device, it is only queried
     once.

  4. Devmon applies template logic against the returned SNMP data.
     The involves doing transforms, applying thresholds, and then
     finally rendering the message to be sent to the display server.

     The rendered message consists of a timestamp, the overall 
     status of the device (aka red, yellow, green) as determined 
     by devmon according to the the SNMP data and template thresholds, 
     and an HTML page providing detailed information for the device.  
     The pages that you see in bb/hobbit for tests generated by devmon 
     are part of the message that devmon sends to the display server.

  5. Devmon sends the rendered messages to the display server.

  6. Devmon sleeps for any remaining time in the poll cycle.

$Id: OVERVIEW 161 2009-11-23 14:07:20Z buchanmilne $

